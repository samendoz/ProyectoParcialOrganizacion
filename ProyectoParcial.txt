#Proyecto Primer Parcial Organizacion de Computadores
#Combate Pokemon
#Petter de La Cruz
#Sebastian Mendoza


	.data
#el archivo debe estar en la misma carpeta que el proyecto
text1:  .asciiz "Error al abrir el archivo! \n"
text2:  .asciiz "Error al leer el archivo! \n"
text3:  .asciiz "Error al escribir el contenido del Buffer! \n"
#archivo: .asciiz "pokeTypes.txt" #var final nombre archivo
archivo: .asciiz "C:\\Users\\smend\\Desktop\\pokeTypes.txt"
buffer: .space 1024

.text

main:
	#Open File
	li $v0, 13 #13 es system call para abrir archivo
	la $a0, archivo #cargo ruta como argumento
	li $a1, 0 #lectura
	li $a2, 0 # se ignora el modo
	syscall # ejecuta el comando 13 y abre el archivo
	beq $v0, -1, LogErrorOpen
	move $s0, $v0 # descriptor de archivo

	#Read File
	li $v0, 14 # comando para lectura
	move $a0, $s0 # descriptor de archivo como argumento
	la $a1, buffer #buffer de donde se leera
	li $a2, 1024 #tamano del buffer
	syscall
	beq $v0, -1, LogErrorRead

	la $s0, buffer #dir inicio buff en $s0
	li $t0, 0 contador
	
	

	#Write File Content
	li $v0, 4
	la $a0, buffer
	syscall
	beq $v0, -1, LogErrorWriteBuffer
	j Exit

LogErrorOpen:
	li $v0, 4
        la $a0, text1
        syscall
	j Exit

LogErrorRead:
	li $v0, 4
        la $a0, text2
        syscall
	j Exit

LogErrorWriteBuffer:
	li $v0, 4
        la $a0, text3
        syscall
	j Exit

/*no funciono
Loop:
	addi $t0, $t0, 2 #index+=2
	#add $t5, $t0, $t0 #array index X2
	#add $t5, $t0, $t0 #array index X2 again
	sll $t5, $t0, 2 #index*4
	add $t6, $t5, $t1 #4x array index in $t6
  
	lw $t2, 0($t6)   #load list[index] into $t2
	#add $t3, $t3, $t2 #$t3 = $t3 + $t2
	beq $t0, $t4, Exit
	li $v0, 1
        move $a0, $t2
	syscall
	j Loop
*/

Exit:
	li $v0, 10
	syscall

